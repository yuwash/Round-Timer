$(document).ready(function(){var a=0,b=0,c=0,d=0,e=0,f=!1,g=null,h=document.getElementById("bell"),i=document.getElementById("ten"),j=document.getElementById("gong"),k=10;!function(a){a.fn.bidigitNumber=function(a){return a%=100,this.text(10>a?"0"+a:a),this}}(jQuery);var l=function(a,b){this.minutesElement=a,this.secondsElement=b};l.prototype.setMinutes=function(a){this.minutesElement.bidigitNumber(a)},l.prototype.setSeconds=function(a){this.secondsElement.bidigitNumber(a)},l.prototype.getMinutes=function(){return parseInt(this.minutesElement.text())},l.prototype.getSeconds=function(){return parseInt(this.secondsElement.text())};var m=function(a){this.timeDisplays=a,this.__minutes=a[0].getSeconds(),this.__seconds=a[0].getMinutes()};m.prototype.setMinutes=function(a){if(this.__minutes!=a){this.__minutes=a;for(var b in this.timeDisplays)this.timeDisplays[b].setMinutes(a)}},m.prototype.setSeconds=function(a){if(this.__seconds!=a){this.__seconds=a;for(var b in this.timeDisplays)this.timeDisplays[b].setSeconds(a)}},m.prototype.getMinutes=function(){return this.__minutes},m.prototype.getSeconds=function(){return this.__seconds},m.prototype.getTotalSeconds=function(){return 60*this.__minutes+this.__seconds},m.prototype.addSeconds=function(a){var b=this.__seconds+a;if(b>=60||0>b){var c=Math.floor(b/60);if(this.setSeconds(b-60*c),c+=this.__minutes,c>=60)c%=60;else if(0>c){var d=Math.floor(c/60);c-=60*d}this.setMinutes(c)}else this.setSeconds(b)},m.prototype.incSeconds=function(){this.addSeconds(1)},m.prototype.incMinutes=function(){this.setMinutes((this.__minutes+1)%60)},m.prototype.decSeconds=function(){this.addSeconds(-1)},m.prototype.decMinutes=function(){this.setMinutes((this.__minutes+59)%60)},m.getTimeWithNewDisplay=function(a,b){var c=new l(a,b),d=new m([c]);return d};var n=function(a,b){this.displayElement=a,this.onChangeFunction=b,this.pull()};n.prototype.pull=function(){this.__counter=parseInt(this.displayElement.text()),this.onChangeFunction(this.__counter)},n.prototype.push=function(){this.displayElement.text(this.__counter)},n.prototype.get=function(){return this.__counter},n.prototype.set=function(a){this.__counter!=a&&(this.__counter=a,this.push(),this.onChangeFunction(this.__counter))},n.prototype.inc=function(){this.__counter++,this.push(),this.onChangeFunction(this.__counter)},n.prototype.dec=function(){this.__counter--,this.push(),this.onChangeFunction(this.__counter)};var o=m.getTimeWithNewDisplay($("#round-time #r-minutes"),$("#round-time #r-seconds")),p=m.getTimeWithNewDisplay($("#rest #rt-minutes"),$("#rest #rt-seconds")),q=m.getTimeWithNewDisplay($("#tminutes"),$("#tseconds"));o.timeDisplays.push(q.timeDisplays[0]);var r=new n($("#total-rounds"),function(b){a=b}),s=new n($("#rounds"),function(){}),t=new n($("#ptimer"),function(){});$("#rounds .plus").click(function(){r.pull(),r.inc()}),$("#rounds .minus").click(function(){r.pull(),r.get()>0&&r.dec()}),$("#round-time .plus").click(function(){o.incSeconds(),c=o.getSeconds()}),$("#round-time .minus").click(function(){o.decSeconds(),c=o.getSeconds()}),$("#round-time .plus-minutes").click(function(){o.incMinutes(),b=o.getMinutes()}),$("#round-time .minus-minutes").click(function(){o.decMinutes(),b=o.getMinutes()}),$("#rest .plus").click(function(){p.incSeconds(),d=p.getSeconds()}),$("#rest .minus").click(function(){p.decSeconds(),d=p.getSeconds()}),$("#rest .plus-minutes").click(function(){p.incMinutes(),e=p.getMinutes()}),$("#rest .minus-minutes").click(function(){p.decMinutes(),e=p.getMinutes()}),$(".mobile-round-count").change(function(){r.set(parseInt($(this).val())),console.log(a)}),$(".mobile-round-minutes").change(function(){b=parseInt($(this).val()),o.setMinutes(b),console.log(b)}),$(".mobile-round-seconds").change(function(){c=parseInt($(this).val()),o.setSeconds(c),console.log(c)}),$(".mobile-rest-minutes").change(function(){e=parseInt($(this).val()),p.setMinutes(e),console.log(e)}),$(".mobile-rest-seconds").change(function(){d=parseInt($(this).val()),p.setSeconds(d),console.log(seconds)}),$("#stop").click(function(){location.reload()}),$("#start").click(function(){if(0==a)alert("You must set the number of rounds");else{$("#start").hide(),$("#prepare").css("margin-left","0"),t.set(k);var b=setInterval(function(){t.dec(),0==t.get()&&($("#prepare").css("margin-left","-9999px"),clearInterval(b),h.play(),x(),y())},1e3)}});var u=function(){q.getTotalSeconds()>0&&(q.decSeconds(),c=q.getSeconds(),b=q.getMinutes(),10==c&&0==b&&i.play())},v=function(){j.play(),s.dec(),f=!0,q.setMinutes(e),q.setSeconds(d),$("#round-counter").css("background-color","red")},w=function(){x(),alert("Session Over!"),$("#start").show()},g=function(){d>0||0==d&&e>0?(q.decSeconds(),e=q.getMinutes(),d=q.getSeconds()):(f=!1,h.play())},x=function(){$("#round-counter").css("background-color","white"),window.innerWidth<=600?(b=$(".mobile-round-minutes").val(),c=$(".mobile-round-seconds").val(),e=$(".mobile-rest-minutes").val(),d=$(".mobile-rest-seconds").val(),a=$(".mobile-round-count").val(),o.setMinutes(b),o.setSeconds(c),p.setMinutes(e),p.setSeconds(d),r.set(a)):(c=o.getSeconds(),b=o.getMinutes(),d=p.getSeconds(),e=p.getMinutes()),q.setMinutes(b),q.setSeconds(c),s.set(a),t.set(k)},y=function(){var a=setInterval(function(){switch(!0){case s.get()>0&&c>0&&!f:case 0==c&&b>0:u();break;case 0==b&&0==c&&!f&&1!=s.get():v();break;case s.get()>=1&&f:g();break;default:clearInterval(a),w()}},1e3)}});