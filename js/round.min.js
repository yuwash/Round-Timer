$(document).ready(function(){"use strict";var a={totalRounds:0,roundMinutes:0,roundSeconds:0,restSeconds:0,restMinutes:0,p:10},b=!1,c=document.getElementById("bell"),d=document.getElementById("ten"),e=document.getElementById("gong");!function(a){a.fn.bidigitNumber=function(a){return a%=100,this.text(10>a?"0"+a:a),this}}(jQuery);var f=function(a,b){this.minutesElement=a,this.secondsElement=b};f.prototype.setMinutes=function(a){this.minutesElement.bidigitNumber(a)},f.prototype.setSeconds=function(a){this.secondsElement.bidigitNumber(a)},f.prototype.getMinutes=function(){return parseInt(this.minutesElement.text())},f.prototype.getSeconds=function(){return parseInt(this.secondsElement.text())};var g=function(a,b){this.timeDisplays=a,this.mobileTimeDisplays=b||[],this.read()};g.prototype.read=function(){window.innerWidth<=600?(this.__minutes=this.mobileTimeDisplays[0].getMinutes(),this.__seconds=this.mobileTimeDisplays[0].getSeconds()):(this.__minutes=this.timeDisplays[0].getMinutes(),this.__seconds=this.timeDisplays[0].getSeconds())},g.prototype.setMinutes=function(a){if(this.__minutes!=a){this.__minutes=a;for(var b in this.timeDisplays)this.timeDisplays[b].setMinutes(a);for(var b in this.mobileTimeDisplays)this.mobileTimeDisplays[b].setMinutes(a)}},g.prototype.setSeconds=function(a){if(this.__seconds!=a){this.__seconds=a;for(var b in this.timeDisplays)this.timeDisplays[b].setSeconds(a);for(var b in this.mobileTimeDisplays)this.mobileTimeDisplays[b].setSeconds(a)}},g.prototype.pullFrom=function(a){if(a.__seconds!=this.__seconds||a.__minutes!=this.__minutes){this.__seconds=a.__seconds,this.__minutes=a.__minutes;for(var b in this.timeDisplays)this.timeDisplays[b].setSeconds(this.__seconds),this.timeDisplays[b].setMinutes(this.__minutes);for(var b in this.mobileTimeDisplays)this.mobileTimeDisplays[b].setSeconds(this.__seconds),this.mobileTimeDisplays[b].setMinutes(this.__minutes)}},g.prototype.getMinutes=function(){return this.__minutes},g.prototype.getSeconds=function(){return this.__seconds},g.prototype.getTotalSeconds=function(){return 60*this.__minutes+this.__seconds},g.prototype.addSeconds=function(a){var b=this.__seconds+a;if(b>=60||0>b){var c=Math.floor(b/60);if(this.setSeconds(b-60*c),c+=this.__minutes,c>=60)c%=60;else if(0>c){var d=Math.floor(c/60);c-=60*d}this.setMinutes(c)}else this.setSeconds(b)},g.prototype.incSeconds=function(){this.addSeconds(1)},g.prototype.incMinutes=function(){this.setMinutes((this.__minutes+1)%60)},g.prototype.decSeconds=function(){this.addSeconds(-1)},g.prototype.decMinutes=function(){this.setMinutes((this.__minutes+59)%60)},g.getTimeWithNewDisplay=function(a,b){var c=new f(a,b),d=new g([c]);return d};var h=function(a,b){this.displayElement=a,this.onChangeFunction=b||function(){},this.read()};h.prototype.read=function(){this.__counter=parseInt(this.displayElement.text()),this.onChangeFunction(this.__counter)},h.prototype.write=function(){this.displayElement.text(this.__counter)},h.prototype.get=function(){return this.__counter},h.prototype.set=function(a){this.__counter!=a&&(this.__counter=a,this.write(),this.onChangeFunction(this.__counter))},h.prototype.inc=function(){this.__counter++,this.write(),this.onChangeFunction(this.__counter)},h.prototype.dec=function(){this.__counter--,this.write(),this.onChangeFunction(this.__counter)};var i=g.getTimeWithNewDisplay($("#round-time #r-minutes"),$("#round-time #r-seconds")),j=g.getTimeWithNewDisplay($("#rest #rt-minutes"),$("#rest #rt-seconds")),k=g.getTimeWithNewDisplay($("#tminutes"),$("#tseconds"));i.mobileTimeDisplays.push(new f($("mobile-round-minutes"),$("mobile-round-seconds"))),j.mobileTimeDisplays.push(new f($("mobile-rest-minutes"),$("mobile-rest-seconds"))),i.timeDisplays.push(k.timeDisplays[0]);var l=new h($("#total-rounds")),m=new h($("#rounds")),n=new h($("#ptimer"));$("#rounds .plus").click(function(){l.read(),l.inc()}),$("#rounds .minus").click(function(){l.read(),l.get()>0&&l.dec()}),$("#round-time .plus").click(function(){i.incSeconds()}),$("#round-time .minus").click(function(){i.decSeconds()}),$("#round-time .plus-minutes").click(function(){i.incMinutes()}),$("#round-time .minus-minutes").click(function(){i.decMinutes()}),$("#rest .plus").click(function(){j.incSeconds()}),$("#rest .minus").click(function(){j.decSeconds()}),$("#rest .plus-minutes").click(function(){j.incMinutes()}),$("#rest .minus-minutes").click(function(){j.decMinutes()}),$(".mobile-round-count").change(function(){l.set(parseInt($(this).val())),console.log(totalRounds)}),$(".mobile-round-minutes").change(function(){roundMinutes=parseInt($(this).val()),i.setMinutes(roundMinutes),console.log(roundMinutes)}),$(".mobile-round-seconds").change(function(){roundSeconds=parseInt($(this).val()),i.setSeconds(roundSeconds),console.log(roundSeconds)}),$(".mobile-rest-minutes").change(function(){restMinutes=parseInt($(this).val()),j.setMinutes(restMinutes),console.log(restMinutes)}),$(".mobile-rest-seconds").change(function(){restSeconds=parseInt($(this).val()),j.setSeconds(restSeconds),console.log(seconds)}),$("#stop").click(function(){location.reload()}),$("#start").click(function(){if(0==l.get())alert("You must set the number of rounds");else{o();var a=setInterval(function(){n.dec(),0==n.get()&&clearInterval(a)},1e3);p()}});var o=function(){$("#start").hide(),$("#prepare").css("margin-left","0"),n.set(a.p)},p=function(){$("#prepare").css("margin-left","-9999px"),c.play(),s(),u()},q=function(){e.play(),m.dec(),b=!0,k.pullFrom(j),$("#round-counter").css("background-color","red")},r=function(){b=!1,k.pullFrom(i),$("#round-counter").css("background-color","white"),c.play()},s=function(){$("#round-counter").css("background-color","white"),k.pullFrom(i),m.set(l.get())},t=function(){s(),alert("Session Over!"),$("#start").show()},u=function(){var a=setInterval(function(){k.getTotalSeconds()>0?(k.decSeconds(),b||10!=k.getTotalSeconds()||d.play()):m.get()<=0?(clearInterval(a),t()):b?r():q()},1e3)}});